{% extends 'base.html.twig' %}

{% block title %}Hello MainController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Hello {{ controller_name }}! âœ…</h1>

    <button class="btn btn-primary" onclick="request()">Send Request to OptAd360 TestApi</button> <label for="sel">Currency</label>
	<select name="sel" id="select" onchange="processChange()">
		<option selected value="1">PLN</option>
		<option value="2">EUR</option>
		<option value="3">USD</option>
		<option value="4">GBP</option>
	</select>
    <p id="output"> </p>
</div>
{% endblock %}

{% block javascripts %}
{{ parent() }}

<script>
function request()
{
	let url = "{{path ('getOptAd360') }}";

	$.ajax({
		url: url,
		method: "post", 
		data: JSON.stringify(
			{'currency':$("#select option:selected").text()})
		})
	.done(res => 
	{ 
		console.log(res);
        $("#output").html(res)
		/*if(res.result == 1)
		{
			$("#comment-"+commentId).remove();
		}*/
	});
}
</script>
{% endblock %}
